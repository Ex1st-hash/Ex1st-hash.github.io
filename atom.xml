<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Ex1st</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2025-06-21T14:10:23.306Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>Ex1st</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title></title>
    <link href="http://example.com/2025/06/21/SAR%20wp/"/>
    <id>http://example.com/2025/06/21/SAR%20wp/</id>
    <published>2025-06-21T14:11:34.777Z</published>
    <updated>2025-06-21T14:10:23.306Z</updated>
    
    <content type="html"><![CDATA[<h2 id="扫描结果"><a href="#扫描结果" class="headerlink" title="扫描结果"></a>扫描结果</h2><p>target ip:10.10.10.134</p><p><img src="C:\Users\YJY\AppData\Roaming\Typora\typora-user-images\image-20250621215905091.png" alt="image-20250621215905091"></p><p>只有一个80端口，看一看TCP详细扫描</p><p><img src="C:\Users\YJY\AppData\Roaming\Typora\typora-user-images\image-20250621215942825.png" alt="image-20250621215942825"></p><p>nmap脚本扫描</p><p><img src="C:\Users\YJY\AppData\Roaming\Typora\typora-user-images\image-20250621220007300.png" alt="image-20250621220007300"></p><p>扫出了robots.txt</p><h2 id="初始权限"><a href="#初始权限" class="headerlink" title="初始权限"></a>初始权限</h2><p>访问http服务，看到是一个默认的阿帕奇页面，查看源码发现无隐藏信息</p><p>直接访问扫出的robots.txt</p><p><img src="C:\Users\YJY\AppData\Roaming\Typora\typora-user-images\image-20250621220024804.png" alt="image-20250621220024804"></p><p>得到一个字符串，推测它可能是一个目录，一个凭据，或者一种CMS名称，用户名等，由于是在robots.txt中发现的，是目录的可能性比较高，目录拼接后访问</p><p><img src="C:\Users\YJY\AppData\Roaming\Typora\typora-user-images\image-20250621220345684.png" alt="image-20250621220345684"></p><p>sar2html Ver 3.2.1，可能是一个cms的版本，在searchsploit或者网页上查找是否有相关漏洞</p><p><img src="C:\Users\YJY\AppData\Roaming\Typora\typora-user-images\image-20250621220411295.png" alt="image-20250621220411295"></p><p>有远程代码执行漏洞，先拷下来看看</p><p>先看txt文件，似乎是先需要一个用户认证才能利用<img src="C:\Users\YJY\AppData\Roaming\Typora\typora-user-images\image-20250621220432579.png" alt="image-20250621220432579"></p><p>再看看py,先直接运行看一下回显</p><p><img src="C:\Users\YJY\AppData\Roaming\Typora\typora-user-images\image-20250621220459092.png" alt="image-20250621220459092"></p><p>不需要凭据似乎可以直接利用</p><p>查看它的源码，大致原理是</p><p>服务器会执行<code>plot=;[攻击者命令]</code>这种拼接后的命令</p><p>不妨手工验证一下，可以正确利用：</p><img src="C:\Users\YJY\AppData\Roaming\Typora\typora-user-images\image-20250621220545049.png" alt="image-20250621220545049" style="zoom:33%;" /><p>先尝试反弹shell，开启攻击机的1234端口监听</p><p><img src="C:\Users\YJY\AppData\Roaming\Typora\typora-user-images\image-20250621220604714.png" alt="image-20250621220604714"></p><p>这里开始反弹shell没有反弹成功，回想脚本原理，给payload加一个urlencode,反弹成功</p><h2 id="提权"><a href="#提权" class="headerlink" title="提权"></a>提权</h2><p>先优化一下tty</p><p><img src="C:\Users\YJY\AppData\Roaming\Typora\typora-user-images\image-20250621220621127.png" alt="image-20250621220621127"></p><p>开始枚举</p><p>sudo -l需要密码，不可行</p><p>suid，查看内核，查看用户信息</p><p>suid乍一看没什么可以利用的，内核版本很高，应该不可行</p><p>&#x2F;home&#x2F;love目录没有看到可利用的隐藏文件</p><p>查看定时任务：<img src="C:\Users\YJY\AppData\Roaming\Typora\typora-user-images\image-20250621220700843.png" alt="image-20250621220700843"></p><p>发现了一个root的sh脚本，每隔五分钟执行，查看其权限</p><p><img src="C:\Users\YJY\AppData\Roaming\Typora\typora-user-images\image-20250621220804869.png" alt="image-20250621220804869"></p><p>可读可执行，cat看一下</p><p><img src="C:\Users\YJY\AppData\Roaming\Typora\typora-user-images\image-20250621220818531.png" alt="image-20250621220818531"></p><p>发现该脚本执行一个名为write.sh的脚本</p><p>而且根据脚本的写法，判断应该是在同级目录下，进去看看</p><p><img src="C:\Users\YJY\AppData\Roaming\Typora\typora-user-images\image-20250621220837687.png" alt="image-20250621220837687"></p><p>是一个权限很低的可写文件，所以这里的提权思路就是，通过在write.sh写入指定命令，让定时任务自动以root权限去执行，应该可以写一个反弹shell，时间一到，root执行反弹shell，攻击机监听成功反弹root shell </p><p>这里让它以root身份打开一个shell应该是不行的，按AI的说法，因为<strong>cron 是后台服务</strong>，没有连接到任何终端（TTY），即使让它运行 <code>/bin/bash</code>，这个 bash 也无法弹出交互界面，因为它没有终端可以依附，所以直接反弹shell试试<img src="C:\Users\YJY\AppData\Roaming\Typora\typora-user-images\image-20250621220856111.png" alt="image-20250621220856111"></p><p>等几分钟回来看看</p><p>提权成功</p><img src="C:\Users\YJY\AppData\Roaming\Typora\typora-user-images\image-20250621220927964.png" alt="image-20250621220927964" style="zoom:67%;" /><h2 id="总结感想"><a href="#总结感想" class="headerlink" title="总结感想"></a>总结感想</h2><p>这台靶机资产很少，不需要判断攻击链优先级权重，比较线性的打法，但是总体来说思路很经典标准，值得练习巩固</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;扫描结果&quot;&gt;&lt;a href=&quot;#扫描结果&quot; class=&quot;headerlink&quot; title=&quot;扫描结果&quot;&gt;&lt;/a&gt;扫描结果&lt;/h2&gt;&lt;p&gt;target ip:10.10.10.134&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;C:&#92;Users&#92;YJY&#92;AppData&#92;R</summary>
      
    
    
    
    
  </entry>
  
</feed>
